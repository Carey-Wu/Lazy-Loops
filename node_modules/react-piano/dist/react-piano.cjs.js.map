{"version":3,"file":"react-piano.cjs.js","sources":["../src/MidiNumbers.js","../src/Key.js","../src/Keyboard.js","../src/ControlledPiano.js","../src/Piano.js","../src/KeyboardShortcuts.js"],"sourcesContent":["import range from 'just-range';\n\nconst SORTED_PITCHES = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\nconst ACCIDENTAL_PITCHES = ['Db', 'Eb', 'Gb', 'Ab', 'Bb'];\nconst PITCH_INDEXES = {\n  C: 0,\n  'C#': 1,\n  Db: 1,\n  D: 2,\n  'D#': 3,\n  Eb: 3,\n  E: 4,\n  F: 5,\n  'F#': 6,\n  Gb: 6,\n  G: 7,\n  'G#': 8,\n  Ab: 8,\n  A: 9,\n  'A#': 10,\n  Bb: 10,\n  B: 11,\n};\nconst MIDI_NUMBER_C0 = 12;\nconst MIN_MIDI_NUMBER = MIDI_NUMBER_C0;\nconst MAX_MIDI_NUMBER = 127;\nconst NOTE_REGEX = /([a-g])([#b]?)(\\d+)/;\nconst NOTES_IN_OCTAVE = 12;\n\n// Converts string notes in scientific pitch notation to a MIDI number, or null.\n//\n// Example: \"c#0\" => 13, \"eb5\" => 75, \"abc\" => null\n//\n// References:\n// - http://www.flutopedia.com/octave_notation.htm\n// - https://github.com/danigb/tonal/blob/master/packages/note/index.js\nfunction fromNote(note) {\n  if (!note) {\n    throw Error('Invalid note argument');\n  }\n  const match = NOTE_REGEX.exec(note.toLowerCase());\n  if (!match) {\n    throw Error('Invalid note argument');\n  }\n  const [, letter, accidental, octave] = match;\n  const pitchName = `${letter.toUpperCase()}${accidental}`;\n  const pitchIndex = PITCH_INDEXES[pitchName];\n  if (pitchIndex == null) {\n    throw Error('Invalid note argument');\n  }\n  return MIDI_NUMBER_C0 + pitchIndex + NOTES_IN_OCTAVE * parseInt(octave, 10);\n}\n\n//\n// Build cache for getAttributes\n//\nfunction buildMidiNumberAttributes(midiNumber) {\n  const pitchIndex = (midiNumber - MIDI_NUMBER_C0) % NOTES_IN_OCTAVE;\n  const octave = Math.floor((midiNumber - MIDI_NUMBER_C0) / NOTES_IN_OCTAVE);\n  const pitchName = SORTED_PITCHES[pitchIndex];\n  return {\n    note: `${pitchName}${octave}`,\n    pitchName,\n    octave,\n    midiNumber,\n    isAccidental: ACCIDENTAL_PITCHES.includes(pitchName),\n  };\n}\n\nfunction buildMidiNumberAttributesCache() {\n  return range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).reduce((cache, midiNumber) => {\n    cache[midiNumber] = buildMidiNumberAttributes(midiNumber);\n    return cache;\n  }, {});\n}\n\nconst midiNumberAttributesCache = buildMidiNumberAttributesCache();\n\n// Returns an object containing various attributes for a given MIDI number.\n// Throws error for invalid midiNumbers.\nfunction getAttributes(midiNumber) {\n  const attrs = midiNumberAttributesCache[midiNumber];\n  if (!attrs) {\n    throw Error('Invalid MIDI number');\n  }\n  return attrs;\n}\n\n// Returns all MIDI numbers corresponding to natural notes, e.g. C and not C# or Bb.\nconst NATURAL_MIDI_NUMBERS = range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).filter(\n  (midiNumber) => !getAttributes(midiNumber).isAccidental,\n);\n\nexport default {\n  fromNote,\n  getAttributes,\n  MIN_MIDI_NUMBER,\n  MAX_MIDI_NUMBER,\n  NATURAL_MIDI_NUMBERS,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport MidiNumbers from './MidiNumbers';\n\nclass Key extends React.Component {\n  static propTypes = {\n    midiNumber: PropTypes.number.isRequired,\n    naturalKeyWidth: PropTypes.number.isRequired, // Width as a ratio between 0 and 1\n    gliss: PropTypes.bool.isRequired,\n    useTouchEvents: PropTypes.bool.isRequired,\n    accidental: PropTypes.bool.isRequired,\n    active: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    accidentalWidthRatio: PropTypes.number.isRequired,\n    pitchPositions: PropTypes.object.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    accidentalWidthRatio: 0.65,\n    pitchPositions: {\n      C: 0,\n      Db: 0.55,\n      D: 1,\n      Eb: 1.8,\n      E: 2,\n      F: 3,\n      Gb: 3.5,\n      G: 4,\n      Ab: 4.7,\n      A: 5,\n      Bb: 5.85,\n      B: 6,\n    },\n  };\n\n  onPlayNoteInput = () => {\n    this.props.onPlayNoteInput(this.props.midiNumber);\n  };\n\n  onStopNoteInput = () => {\n    this.props.onStopNoteInput(this.props.midiNumber);\n  };\n\n  // Key position is represented by the number of natural key widths from the left\n  getAbsoluteKeyPosition(midiNumber) {\n    const OCTAVE_WIDTH = 7;\n    const { octave, pitchName } = MidiNumbers.getAttributes(midiNumber);\n    const pitchPosition = this.props.pitchPositions[pitchName];\n    const octavePosition = OCTAVE_WIDTH * octave;\n    return pitchPosition + octavePosition;\n  }\n\n  getRelativeKeyPosition(midiNumber) {\n    return (\n      this.getAbsoluteKeyPosition(midiNumber) -\n      this.getAbsoluteKeyPosition(this.props.noteRange.first)\n    );\n  }\n\n  render() {\n    const {\n      naturalKeyWidth,\n      accidentalWidthRatio,\n      midiNumber,\n      gliss,\n      useTouchEvents,\n      accidental,\n      active,\n      disabled,\n      children,\n    } = this.props;\n\n    // Need to conditionally include/exclude handlers based on useTouchEvents,\n    // because otherwise mobile taps double fire events.\n    return (\n      <div\n        className={classNames('ReactPiano__Key', {\n          'ReactPiano__Key--accidental': accidental,\n          'ReactPiano__Key--natural': !accidental,\n          'ReactPiano__Key--disabled': disabled,\n          'ReactPiano__Key--active': active,\n        })}\n        style={{\n          left: ratioToPercentage(this.getRelativeKeyPosition(midiNumber) * naturalKeyWidth),\n          width: ratioToPercentage(\n            accidental ? accidentalWidthRatio * naturalKeyWidth : naturalKeyWidth,\n          ),\n        }}\n        onMouseDown={useTouchEvents ? null : this.onPlayNoteInput}\n        onMouseUp={useTouchEvents ? null : this.onStopNoteInput}\n        onMouseEnter={gliss ? this.onPlayNoteInput : null}\n        onMouseLeave={this.onStopNoteInput}\n        onTouchStart={useTouchEvents ? this.onPlayNoteInput : null}\n        onTouchCancel={useTouchEvents ? this.onStopNoteInput : null}\n        onTouchEnd={useTouchEvents ? this.onStopNoteInput : null}\n      >\n        <div className=\"ReactPiano__NoteLabelContainer\">{children}</div>\n      </div>\n    );\n  }\n}\n\nfunction ratioToPercentage(ratio) {\n  return `${ratio * 100}%`;\n}\n\nexport default Key;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport range from 'just-range';\nimport classNames from 'classnames';\n\nimport Key from './Key';\nimport MidiNumbers from './MidiNumbers';\n\nclass Keyboard extends React.Component {\n  static propTypes = {\n    noteRange: noteRangePropType,\n    activeNotes: PropTypes.arrayOf(PropTypes.number),\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    keyWidthToHeight: PropTypes.number.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    gliss: PropTypes.bool,\n    useTouchEvents: PropTypes.bool,\n    // If width is not provided, must have fixed width and height in parent container\n    width: PropTypes.number,\n  };\n\n  static defaultProps = {\n    disabled: false,\n    gliss: false,\n    useTouchEvents: false,\n    keyWidthToHeight: 0.33,\n    renderNoteLabel: () => {},\n  };\n\n  // Range of midi numbers on keyboard\n  getMidiNumbers() {\n    return range(this.props.noteRange.first, this.props.noteRange.last + 1);\n  }\n\n  getNaturalKeyCount() {\n    return this.getMidiNumbers().filter((number) => {\n      const { isAccidental } = MidiNumbers.getAttributes(number);\n      return !isAccidental;\n    }).length;\n  }\n\n  // Returns a ratio between 0 and 1\n  getNaturalKeyWidth() {\n    return 1 / this.getNaturalKeyCount();\n  }\n\n  getWidth() {\n    return this.props.width ? this.props.width : '100%';\n  }\n\n  getHeight() {\n    if (!this.props.width) {\n      return '100%';\n    }\n    const keyWidth = this.props.width * this.getNaturalKeyWidth();\n    return `${keyWidth / this.props.keyWidthToHeight}px`;\n  }\n\n  render() {\n    const naturalKeyWidth = this.getNaturalKeyWidth();\n    return (\n      <div\n        className={classNames('ReactPiano__Keyboard', this.props.className)}\n        style={{ width: this.getWidth(), height: this.getHeight() }}\n      >\n        {this.getMidiNumbers().map((midiNumber) => {\n          const { note, isAccidental } = MidiNumbers.getAttributes(midiNumber);\n          const isActive = this.props.activeNotes.includes(midiNumber);\n          return (\n            <Key\n              naturalKeyWidth={naturalKeyWidth}\n              midiNumber={midiNumber}\n              noteRange={this.props.noteRange}\n              active={isActive}\n              accidental={isAccidental}\n              disabled={this.props.disabled}\n              onPlayNoteInput={this.props.onPlayNoteInput}\n              onStopNoteInput={this.props.onStopNoteInput}\n              gliss={this.props.gliss}\n              useTouchEvents={this.props.useTouchEvents}\n              key={midiNumber}\n            >\n              {this.props.disabled\n                ? null\n                : this.props.renderNoteLabel({\n                    isActive,\n                    isAccidental,\n                    midiNumber,\n                  })}\n            </Key>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nfunction isNaturalMidiNumber(value) {\n  if (typeof value !== 'number') {\n    return false;\n  }\n  return MidiNumbers.NATURAL_MIDI_NUMBERS.includes(value);\n}\n\nfunction noteRangePropType(props, propName, componentName) {\n  const { first, last } = props[propName];\n  if (!first || !last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} must be an object with .first and .last values.`,\n    );\n  }\n  if (!isNaturalMidiNumber(first) || !isNaturalMidiNumber(last)) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes).`,\n    );\n  }\n  if (first >= last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName}.first must be smaller than ${propName}.last.`,\n    );\n  }\n}\n\nexport default Keyboard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport Keyboard from './Keyboard';\n\nclass ControlledPiano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired).isRequired,\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    renderNoteLabel: ({ keyboardShortcut, midiNumber, isActive, isAccidental }) =>\n      keyboardShortcut ? (\n        <div\n          className={classNames('ReactPiano__NoteLabel', {\n            'ReactPiano__NoteLabel--active': isActive,\n            'ReactPiano__NoteLabel--accidental': isAccidental,\n            'ReactPiano__NoteLabel--natural': !isAccidental,\n          })}\n        >\n          {keyboardShortcut}\n        </div>\n      ) : null,\n  };\n\n  state = {\n    isMouseDown: false,\n    useTouchEvents: false,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.activeNotes !== prevProps.activeNotes) {\n      this.handleNoteChanges({\n        prevActiveNotes: prevProps.activeNotes || [],\n        nextActiveNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  // This function is responsible for diff'ing activeNotes\n  // and playing or stopping notes accordingly.\n  handleNoteChanges = ({ prevActiveNotes, nextActiveNotes }) => {\n    if (this.props.disabled) {\n      return;\n    }\n    const notesStopped = difference(prevActiveNotes, nextActiveNotes);\n    const notesStarted = difference(nextActiveNotes, prevActiveNotes);\n    notesStarted.forEach((midiNumber) => {\n      this.props.playNote(midiNumber);\n    });\n    notesStopped.forEach((midiNumber) => {\n      this.props.stopNote(midiNumber);\n    });\n  };\n\n  getMidiNumberForKey = (key) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.key === key);\n    return shortcut && shortcut.midiNumber;\n  };\n\n  getKeyForMidiNumber = (midiNumber) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.midiNumber === midiNumber);\n    return shortcut && shortcut.key;\n  };\n\n  onKeyDown = (event) => {\n    // Don't conflict with existing combinations like ctrl + t\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onPlayNoteInput(midiNumber);\n    }\n  };\n\n  onKeyUp = (event) => {\n    // This *should* also check for event.ctrlKey || event.metaKey || event.ShiftKey like onKeyDown does,\n    // but at least on Mac Chrome, when mashing down many alphanumeric keystrokes at once,\n    // ctrlKey is fired unexpectedly, which would cause onStopNote to NOT be fired, which causes problematic\n    // lingering notes. Since it's fairly safe to call onStopNote even when not necessary,\n    // the ctrl/meta/shift check is removed to fix that issue.\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onStopNoteInput(midiNumber);\n    }\n  };\n\n  onPlayNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onPlayNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onStopNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onStopNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onMouseDown = () => {\n    this.setState({\n      isMouseDown: true,\n    });\n  };\n\n  onMouseUp = () => {\n    this.setState({\n      isMouseDown: false,\n    });\n  };\n\n  onTouchStart = () => {\n    this.setState({\n      useTouchEvents: true,\n    });\n  };\n\n  renderNoteLabel = ({ midiNumber, isActive, isAccidental }) => {\n    const keyboardShortcut = this.getKeyForMidiNumber(midiNumber);\n    return this.props.renderNoteLabel({ keyboardShortcut, midiNumber, isActive, isAccidental });\n  };\n\n  render() {\n    return (\n      <div\n        style={{ width: '100%', height: '100%' }}\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onTouchStart={this.onTouchStart}\n        data-testid=\"container\"\n      >\n        <Keyboard\n          noteRange={this.props.noteRange}\n          onPlayNoteInput={this.onPlayNoteInput}\n          onStopNoteInput={this.onStopNoteInput}\n          activeNotes={this.props.activeNotes}\n          className={this.props.className}\n          disabled={this.props.disabled}\n          width={this.props.width}\n          keyWidthToHeight={this.props.keyWidthToHeight}\n          gliss={this.state.isMouseDown}\n          useTouchEvents={this.state.useTouchEvents}\n          renderNoteLabel={this.renderNoteLabel}\n        />\n      </div>\n    );\n  }\n}\n\nexport default ControlledPiano;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport ControlledPiano from './ControlledPiano';\nimport Keyboard from './Keyboard';\n\nclass Piano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired),\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func,\n    onStopNoteInput: PropTypes.func,\n    renderNoteLabel: PropTypes.func,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  state = {\n    activeNotes: this.props.activeNotes || [],\n  };\n\n  componentDidUpdate(prevProps) {\n    // Make activeNotes \"controllable\" by using internal\n    // state by default, but allowing prop overrides.\n    if (\n      prevProps.activeNotes !== this.props.activeNotes &&\n      this.state.activeNotes !== this.props.activeNotes\n    ) {\n      this.setState({\n        activeNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  handlePlayNoteInput = (midiNumber) => {\n    if (this.props.onPlayNoteInput) {\n      this.props.onPlayNoteInput(midiNumber, { prevActiveNotes: this.state.activeNotes });\n    }\n    this.setState((prevState) => {\n      // Don't append note to activeNotes if it's already present\n      if (prevState.activeNotes.includes(midiNumber)) {\n        return null;\n      }\n      return {\n        activeNotes: prevState.activeNotes.concat(midiNumber),\n      };\n    });\n  };\n\n  handleStopNoteInput = (midiNumber) => {\n    if (this.props.onStopNoteInput) {\n      this.props.onStopNoteInput(midiNumber, { prevActiveNotes: this.state.activeNotes });\n    }\n    this.setState((prevState) => ({\n      activeNotes: prevState.activeNotes.filter((note) => midiNumber !== note),\n    }));\n  };\n\n  render() {\n    const { activeNotes, onPlayNoteInput, onStopNoteInput, ...otherProps } = this.props;\n    return (\n      <ControlledPiano\n        activeNotes={this.state.activeNotes}\n        onPlayNoteInput={this.handlePlayNoteInput}\n        onStopNoteInput={this.handleStopNoteInput}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nexport default Piano;\n","import MidiNumbers from './MidiNumbers';\n\nfunction createKeyboardShortcuts({ firstNote, lastNote, keyboardConfig }) {\n  let currentMidiNumber = firstNote;\n  let naturalKeyIndex = 0;\n  let keyboardShortcuts = [];\n\n  while (\n    // There are still keys to be assigned\n    naturalKeyIndex < keyboardConfig.length &&\n    // Note to be assigned does not surpass range\n    currentMidiNumber <= lastNote\n  ) {\n    const key = keyboardConfig[naturalKeyIndex];\n    const { isAccidental } = MidiNumbers.getAttributes(currentMidiNumber);\n    if (isAccidental) {\n      keyboardShortcuts.push({\n        key: key.flat,\n        midiNumber: currentMidiNumber,\n      });\n    } else {\n      keyboardShortcuts.push({\n        key: key.natural,\n        midiNumber: currentMidiNumber,\n      });\n      naturalKeyIndex += 1;\n    }\n    currentMidiNumber += 1;\n  }\n  return keyboardShortcuts;\n}\n\nexport default {\n  create: createKeyboardShortcuts,\n  // Preset configurations\n  BOTTOM_ROW: [\n    { natural: 'z', flat: 'a', sharp: 's' },\n    { natural: 'x', flat: 's', sharp: 'd' },\n    { natural: 'c', flat: 'd', sharp: 'f' },\n    { natural: 'v', flat: 'f', sharp: 'g' },\n    { natural: 'b', flat: 'g', sharp: 'h' },\n    { natural: 'n', flat: 'h', sharp: 'j' },\n    { natural: 'm', flat: 'j', sharp: 'k' },\n    { natural: ',', flat: 'k', sharp: 'l' },\n    { natural: '.', flat: 'l', sharp: ';' },\n    { natural: '/', flat: ';', sharp: \"'\" },\n  ],\n  HOME_ROW: [\n    { natural: 'a', flat: 'q', sharp: 'w' },\n    { natural: 's', flat: 'w', sharp: 'e' },\n    { natural: 'd', flat: 'e', sharp: 'r' },\n    { natural: 'f', flat: 'r', sharp: 't' },\n    { natural: 'g', flat: 't', sharp: 'y' },\n    { natural: 'h', flat: 'y', sharp: 'u' },\n    { natural: 'j', flat: 'u', sharp: 'i' },\n    { natural: 'k', flat: 'i', sharp: 'o' },\n    { natural: 'l', flat: 'o', sharp: 'p' },\n    { natural: ';', flat: 'p', sharp: '[' },\n    { natural: \"'\", flat: '[', sharp: ']' },\n  ],\n  QWERTY_ROW: [\n    { natural: 'q', flat: '1', sharp: '2' },\n    { natural: 'w', flat: '2', sharp: '3' },\n    { natural: 'e', flat: '3', sharp: '4' },\n    { natural: 'r', flat: '4', sharp: '5' },\n    { natural: 't', flat: '5', sharp: '6' },\n    { natural: 'y', flat: '6', sharp: '7' },\n    { natural: 'u', flat: '7', sharp: '8' },\n    { natural: 'i', flat: '8', sharp: '9' },\n    { natural: 'o', flat: '9', sharp: '0' },\n    { natural: 'p', flat: '0', sharp: '-' },\n    { natural: '[', flat: '-', sharp: '=' },\n  ],\n};\n"],"names":["SORTED_PITCHES","ACCIDENTAL_PITCHES","PITCH_INDEXES","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","MIDI_NUMBER_C0","MIN_MIDI_NUMBER","MAX_MIDI_NUMBER","NOTE_REGEX","NOTES_IN_OCTAVE","fromNote","note","Error","match","exec","toLowerCase","letter","accidental","octave","pitchName","toUpperCase","pitchIndex","parseInt","buildMidiNumberAttributes","midiNumber","Math","floor","isAccidental","includes","buildMidiNumberAttributesCache","range","reduce","cache","midiNumberAttributesCache","getAttributes","attrs","NATURAL_MIDI_NUMBERS","filter","Key","props","onPlayNoteInput","onStopNoteInput","OCTAVE_WIDTH","MidiNumbers","pitchPosition","pitchPositions","octavePosition","getAbsoluteKeyPosition","noteRange","first","naturalKeyWidth","accidentalWidthRatio","gliss","useTouchEvents","active","disabled","children","classNames","left","ratioToPercentage","getRelativeKeyPosition","width","React","Component","PropTypes","number","isRequired","bool","func","object","node","ratio","Keyboard","last","getMidiNumbers","length","getNaturalKeyCount","keyWidth","getNaturalKeyWidth","keyWidthToHeight","className","getWidth","height","getHeight","map","isActive","activeNotes","renderNoteLabel","noteRangePropType","arrayOf","string","isNaturalMidiNumber","value","propName","componentName","ControlledPiano","isMouseDown","prevActiveNotes","nextActiveNotes","notesStopped","difference","notesStarted","forEach","playNote","stopNote","key","keyboardShortcuts","shortcut","find","sh","event","ctrlKey","metaKey","shiftKey","getMidiNumberForKey","setState","keyboardShortcut","getKeyForMidiNumber","window","addEventListener","onKeyDown","onKeyUp","removeEventListener","prevProps","prevState","handleNoteChanges","onMouseDown","onMouseUp","onTouchStart","state","shape","Piano","concat","otherProps","handlePlayNoteInput","handleStopNoteInput","createKeyboardShortcuts","firstNote","lastNote","keyboardConfig","currentMidiNumber","naturalKeyIndex","push","flat","natural","create","BOTTOM_ROW","sharp","HOME_ROW","QWERTY_ROW"],"mappings":"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"}